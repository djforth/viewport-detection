(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"./lib/viewport_detector.coffee":[function(require,module,exports){
'use strict';
var _, viewportDetection;

require('angular');

_ = require('lodash');

viewportDetection = angular.module('$viewportDetection', []).service('resizer', [
  "$rootScope", "$window", function($rootScope, $window) {
    var addCallback, callbacks, current_width, getDevice, isSmartDevice, touchSupport, windowSize;
    current_width = 0;
    callbacks = [];
    addCallback = function(c) {
      if (!_.isFunction(c)) {
        throw new Error("Not a function");
      }
      if (!_.contains(callbacks, c)) {
        callbacks.push(c);
      }
      return null;
    };
    touchSupport = function() {
      return $window.touch;
    };
    isSmartDevice = function() {
      var ua;
      ua = $window['navigator']['userAgent'] || $window['navigator']['vendor'] || $window['opera'];
      return /iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(ua);
    };
    windowSize = function() {
      return {
        height: $window.innerHeight,
        width: $window.innerWidth
      };
    };
    getDevice = function() {
      var winWidth;
      winWidth = windowSize().width;
      switch (false) {
        case !(winWidth <= 480):
          return "mobile";
        case !(winWidth > 480 && winWidth < 769):
          return "tablet";
        default:
          return "desktop";
      }
    };
    return {
      addCallback: addCallback,
      isSmartDevice: isSmartDevice,
      getWidth: function(w) {
        if (w == null) {
          w = null;
        }
        if (!_.isNull(w)) {
          current_width = w;
        }
        return current_width;
      },
      getDevice: getDevice,
      getCallbacks: function() {
        return callbacks;
      },
      sizeChange: function(w) {
        if (current_width === w) {
          return false;
        }
        current_width = w;
        return true;
      },
      resizeFn: function() {
        var size_obj;
        size_obj = this.windowSize();
        if (this.sizeChange(size_obj.width)) {
          return this.runCallBacks(size_obj);
        }
      },
      runCallBacks: function(size) {
        var device;
        device = this.getDevice(size.width);
        return _.forEach(callbacks, function(cb, i) {
          cb(device, size);
          return null;
        });
      },
      trackerCalled: false,
      trackSize: function(callback) {
        var that;
        this.addCallback(callback);
        if (!this.trackerCalled) {
          this.trackerCalled = true;
          that = this;
          return angular.element($window).bind('resize', function() {
            var size_obj;
            size_obj = that.windowSize();
            return that.resizeFn.call(that);
          });
        }
      },
      windowSize: windowSize
    };
  }
]);

module.exports = viewportDetection;



},{"angular":"angular","lodash":"lodash"}]},{},["./lib/viewport_detector.coffee"])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvZGpmb3J0aC93ZWJzaXRlcy9tb2R1bGVzL3ZpZXdwb3J0LWRldGVjdGlvbi9saWIvdmlld3BvcnRfZGV0ZWN0b3IuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsWUFBQSxDQUFBO0FBQUEsSUFBQSxvQkFBQTs7QUFBQSxPQUNBLENBQVEsU0FBUixDQURBLENBQUE7O0FBQUEsQ0FHQSxHQUFJLE9BQUEsQ0FBUSxRQUFSLENBSEosQ0FBQTs7QUFBQSxpQkFLQSxHQUFxQixPQUFPLENBQUMsTUFBUixDQUFlLG9CQUFmLEVBQXFDLEVBQXJDLENBQ25CLENBQUMsT0FEa0IsQ0FDVixTQURVLEVBQ0M7RUFBQyxZQUFELEVBQWMsU0FBZCxFQUF5QixTQUFDLFVBQUQsRUFBYSxPQUFiLEdBQUE7QUFFM0MsUUFBQSx5RkFBQTtBQUFBLElBQUEsYUFBQSxHQUFnQixDQUFoQixDQUFBO0FBQUEsSUFDQSxTQUFBLEdBQWdCLEVBRGhCLENBQUE7QUFBQSxJQUlBLFdBQUEsR0FBYyxTQUFDLENBQUQsR0FBQTtBQUVaLE1BQUEsSUFBQSxDQUFBLENBQTJDLENBQUMsVUFBRixDQUFhLENBQWIsQ0FBMUM7QUFBQSxjQUFVLElBQUEsS0FBQSxDQUFNLGdCQUFOLENBQVYsQ0FBQTtPQUFBO0FBQ0EsTUFBQSxJQUFBLENBQUEsQ0FBUSxDQUFDLFFBQUYsQ0FBVyxTQUFYLEVBQXNCLENBQXRCLENBQVA7QUFFRSxRQUFBLFNBQVMsQ0FBQyxJQUFWLENBQWUsQ0FBZixDQUFBLENBRkY7T0FEQTthQUtBLEtBUFk7SUFBQSxDQUpkLENBQUE7QUFBQSxJQWFBLFlBQUEsR0FBYyxTQUFBLEdBQUE7YUFDWixPQUFPLENBQUMsTUFESTtJQUFBLENBYmQsQ0FBQTtBQUFBLElBZ0JBLGFBQUEsR0FBZ0IsU0FBQSxHQUFBO0FBRWQsVUFBQSxF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LE9BQVIsQ0FBZ0IsT0FBaEIsQ0FBd0IsQ0FBQyxJQUF6QixDQUE4QixRQUE5QixFQUF3QyxTQUFBLEdBQUE7QUFDdEMsZ0JBQUEsUUFBQTtBQUFBLFlBQUEsUUFBQSxHQUFXLElBQUksQ0FBQyxVQUFMLENBQUEsQ0FBWCxDQUFBO21CQUNBLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBZCxDQUFtQixJQUFuQixFQUZzQztVQUFBLENBQXhDLEVBSEY7U0FGUTtNQUFBLENBcENMO0FBQUEsTUFpREwsVUFBQSxFQUFXLFVBakROO0tBQVAsQ0F2QzJDO0VBQUEsQ0FBekI7Q0FERCxDQUxyQixDQUFBOztBQUFBLE1Ba0dNLENBQUMsT0FBUCxHQUFpQixpQkFsR2pCLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnXG5yZXF1aXJlKCdhbmd1bGFyJylcblxuXyA9IHJlcXVpcmUoJ2xvZGFzaCcpXG5cbnZpZXdwb3J0RGV0ZWN0aW9uID0gIGFuZ3VsYXIubW9kdWxlKCckdmlld3BvcnREZXRlY3Rpb24nLCBbXSlcbiAgLnNlcnZpY2UoJ3Jlc2l6ZXInLCBbXCIkcm9vdFNjb3BlXCIsXCIkd2luZG93XCIsICgkcm9vdFNjb3BlLCAkd2luZG93KS0+XG5cbiAgICBjdXJyZW50X3dpZHRoID0gMFxuICAgIGNhbGxiYWNrcyAgICAgPSBbXVxuICAgICMgdHJhY2tlckNhbGxlZCA9IGZhbHNlXG5cbiAgICBhZGRDYWxsYmFjayA9IChjKS0+XG5cbiAgICAgIHRocm93KG5ldyBFcnJvcihcIk5vdCBhIGZ1bmN0aW9uXCIpKSB1bmxlc3MgXy5pc0Z1bmN0aW9uKGMpXG4gICAgICB1bmxlc3MgXy5jb250YWlucyhjYWxsYmFja3MsIGMpXG4gICAgICAgICMgY29uc29sZS5sb2cgXCJhZGQgY2FsbGJhY2tzXCIsIGNhbGxiYWNrcy5sZW5ndGhcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goYylcblxuICAgICAgbnVsbFxuXG4gICAgdG91Y2hTdXBwb3J0PSAoKS0+XG4gICAgICAkd2luZG93LnRvdWNoXG5cbiAgICBpc1NtYXJ0RGV2aWNlID0gKCktPlxuICAgICAgIyBBZGFwdGVkIGZyb20gaHR0cDovL3d3dy5kZXRlY3Rtb2JpbGVicm93c2Vycy5jb21cbiAgICAgIHVhID0gJHdpbmRvd1snbmF2aWdhdG9yJ11bJ3VzZXJBZ2VudCddIHx8ICR3aW5kb3dbJ25hdmlnYXRvciddWyd2ZW5kb3InXSB8fCAkd2luZG93WydvcGVyYSddO1xuXG4gICAgICAjQ2hlY2tzIGZvciBpT3MsIEFuZHJvaWQsIEJsYWNrYmVycnksIE9wZXJhIE1pbmksIGFuZCBXaW5kb3dzIG1vYmlsZSBkZXZpY2VzXG4gICAgICByZXR1cm4gKC9pUGhvbmV8aVBvZHxpUGFkfFNpbGt8QW5kcm9pZHxCbGFja0JlcnJ5fE9wZXJhIE1pbml8SUVNb2JpbGUvKS50ZXN0KHVhKTtcblxuICAgIHdpbmRvd1NpemUgPSAoKS0+XG4gICAgICB7aGVpZ2h0OiAkd2luZG93LmlubmVySGVpZ2h0LCB3aWR0aDokd2luZG93LmlubmVyV2lkdGh9XG5cblxuXG4gICAgZ2V0RGV2aWNlID0gKCktPlxuICAgICAgd2luV2lkdGggPSB3aW5kb3dTaXplKCkud2lkdGhcblxuICAgICAgc3dpdGNoXG4gICAgICAgIHdoZW4gd2luV2lkdGggPD0gNDgwIHRoZW4gcmV0dXJuIFwibW9iaWxlXCJcbiAgICAgICAgd2hlbiB3aW5XaWR0aCA+IDQ4MCAmJiB3aW5XaWR0aCA8IDc2OSB0aGVuIHJldHVybiBcInRhYmxldFwiXG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gXCJkZXNrdG9wXCJcblxuICAgIHJldHVybiB7XG4gICAgICBhZGRDYWxsYmFjazphZGRDYWxsYmFja1xuICAgICAgaXNTbWFydERldmljZTppc1NtYXJ0RGV2aWNlXG5cbiAgICAgIGdldFdpZHRoOih3PW51bGwpLT5cbiAgICAgICAgY3VycmVudF93aWR0aCA9IHcgdW5sZXNzIF8uaXNOdWxsKHcpXG4gICAgICAgIHJldHVybiBjdXJyZW50X3dpZHRoXG5cbiAgICAgIGdldERldmljZTpnZXREZXZpY2VcblxuICAgICAgZ2V0Q2FsbGJhY2tzOigpLT5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrc1xuXG5cbiAgICAgIHNpemVDaGFuZ2U6KHcpLT5cblxuICAgICAgICByZXR1cm4gZmFsc2UgaWYgY3VycmVudF93aWR0aCA9PSB3XG5cbiAgICAgICAgY3VycmVudF93aWR0aCA9IHdcbiAgICAgICAgcmV0dXJuIHRydWVcblxuICAgICAgcmVzaXplRm46KCktPlxuICAgICAgICBzaXplX29iaiA9IEB3aW5kb3dTaXplKClcbiAgICAgICAgQHJ1bkNhbGxCYWNrcyhzaXplX29iaikgaWYgQHNpemVDaGFuZ2Uoc2l6ZV9vYmoud2lkdGgpXG5cbiAgICAgIHJ1bkNhbGxCYWNrczooc2l6ZSktPlxuICAgICAgICBkZXZpY2UgPSBAZ2V0RGV2aWNlKHNpemUud2lkdGgpXG4gICAgICAgIF8uZm9yRWFjaChjYWxsYmFja3MsIChjYiwgaSktPlxuICAgICAgICAgIGNiKGRldmljZSwgc2l6ZSlcbiAgICAgICAgICBudWxsXG4gICAgICAgIClcblxuXG4gICAgICAjU28gcmVzaXplIG5vdCBzZXQgbXVsdGlwbGUgdGltZXNcbiAgICAgIHRyYWNrZXJDYWxsZWQ6ZmFsc2VcbiAgICAgICMgVHJhY2tzIHJlc2l6ZXMgZXZlbnRzXG4gICAgICB0cmFja1NpemU6KGNhbGxiYWNrKS0+XG4gICAgICAgIEBhZGRDYWxsYmFjayhjYWxsYmFjaylcbiAgICAgICAgdW5sZXNzIEB0cmFja2VyQ2FsbGVkXG4gICAgICAgICAgQHRyYWNrZXJDYWxsZWQgPSB0cnVlXG4gICAgICAgICAgdGhhdCA9IEBcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCAncmVzaXplJywgLT5cbiAgICAgICAgICAgIHNpemVfb2JqID0gdGhhdC53aW5kb3dTaXplKClcbiAgICAgICAgICAgIHRoYXQucmVzaXplRm4uY2FsbCh0aGF0KVxuXG5cbiAgICAgICAgICAgICMgZGV2aWNlID0gZ2V0RGV2aWNlKHNpemVfb2JqLndpZHRoKVxuICAgICAgICAgICAgIyBjYWxsYmFjayhkZXZpY2UsIHNpemVfb2JqKVxuXG4gICAgICB3aW5kb3dTaXplOndpbmRvd1NpemVcbiAgICB9XG5dKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHZpZXdwb3J0RGV0ZWN0aW9uIl19
